<view class="article" onLoad="{{handleLoad}}"><block wx:if="{{!loading}}"><view class="background"><view class="container"><view class="title">{{article.title}}</view><view class="content">{{article.content}}</view><view class="actions"><view data-event-opts="{{[['tap',[['like',['$event']]]]]}}" class="action" bindtap="__e"><image class="{{[(isLiked)?'liked':'']}}" src="{{isLiked?'../../icon/liked.png':'../../icon/like.png'}}"></image><view class="like-count">{{article.likes}}</view></view><button class="action" open-type="share">分享</button><view data-event-opts="{{[['tap',[['collect',['$event']]]]]}}" class="action" bindtap="__e"><image class="{{[(isCollected)?'collected':'']}}" src="{{isCollected?'../../icon/crollerd.png':'../../icon/croller.png'}}"></image></view></view></view></view></block><block wx:else><view class="loading"><text>加载中...</text></view></block><view class="comments" onLoad="{{handleLoad}}"><view class="container"><view class="comment-input"><input type="text" placeholder="写下你的评论..." data-event-opts="{{[['confirm',[['submitComment',['$event']]]],['input',[['__set_model',['','content','$event',['trim']]]]],['blur',[['$forceUpdate']]]]}}" value="{{content}}" bindconfirm="__e" bindinput="__e" bindblur="__e"/><button data-event-opts="{{[['tap',[['submitComment',['$event']]]]]}}" bindtap="__e">发送</button></view><view class="comment-list"><block wx:for="{{$root.l0}}" wx:for-item="comment" wx:for-index="index" wx:key="index"><view class="comment-item"><image class="avatar" src="{{comment.$orig.avatarUrl}}" mode="aspectFill"></image><view class="content"><view><text class="nickname">{{comment.$orig.nickName}}</text></view><text class="text">{{comment.$orig.content}}</text><block wx:if="{{comment.g0}}"><view class="images"><block wx:for="{{comment.$orig.images}}" wx:for-item="image" wx:for-index="i" wx:key="i"><image class="image-item" src="{{image}}" mode="aspectFill"></image></block></view></block><view class="actions"><text class="time">{{comment.$orig.time}}</text><view class="buttons"><view data-event-opts="{{[['tap',[['toggleLike',['$0'],[[['comments','',index]]]]]]]}}" class="button-item" bindtap="__e"><text class="{{['iconfont',(!comment.$orig.liked)?'icon-like':'',(comment.$orig.liked)?'icon-liked':'']}}"></text><text>{{comment.$orig.likes}}</text></view><view data-event-opts="{{[['tap',[['reply',['$0'],[[['comments','',index]]]]]]]}}" class="button-item" bindtap="__e"><text class="iconfont icon-comment"></text><text>{{comment.$orig.replies}}</text></view></view></view></view></view></block></view></view></view></view>